import{E as $,X as w,a as n,b as l,ba as U,c,oc as s,pc as C,q as u,rc as p,u as f,v as o}from"./chunk-LS7CSANC.js";function m(i){return l(n({},i),{added_at:new Date(`${i.added_at}Z`),updated_at:new Date(`${i.updated_at}Z`),downloaded_at:new Date(`${i.downloaded_at}Z`),isImageLoaded:!1})}function d(i){let h=[{type:"folder",name:"None",size:"",path:"",files:[],modified:new Date,isExpanded:!1}];return i.files&&(h=i.files.map(t=>_(t)?M(t):d(t))),l(n({},i),{isExpanded:!1,modified:new Date(`${i.created}Z`),files:h})}function M(i){return l(n({},i),{isExpanded:!1,modified:new Date(`${i.created}Z`)})}function _(i){return i.type==="file"}var T=(()=>{class i{constructor(){this.httpClient=U(C),this.mediaUrl=p.apiUrl+p.media}fetchAllMedia(t,e="all"){let r=`${this.mediaUrl}all`,a;return t!==null?a=new s().set("movies_only",t).set("filter_by",e):a=new s().set("filter_by",e),this.httpClient.get(r,{params:a})}fetchUpdatedMedia(t){let e=`${this.mediaUrl}updated`,r=new s().set("seconds",t);return this.httpClient.get(e,{params:r})}fetchRecentlyDownloaded(t){let e=`${this.mediaUrl}downloaded`,r=new s;return t!==null?r=new s().set("limit","50").set("movies_only",t):r=new s().set("limit","50"),this.httpClient.get(e,{params:r}).pipe(o(a=>a.map(g=>m(g))))}getMediaByID(t){let e=`${this.mediaUrl}${t}`;return this.httpClient.get(e).pipe(o(r=>m(r)))}searchMedia(t){let e=`${this.mediaUrl}search`,r=new s().set("query",t);return this.httpClient.get(e,{params:r})}batchUpdate(t,e){let r=`${this.mediaUrl}batch_update`;return this.httpClient.post(r,{media_ids:t,action:e.toLowerCase()})}downloadMediaTrailer(t,e){let r=new s().set("yt_id",e),a=`${this.mediaUrl}${t}/download`;return this.httpClient.post(a,{},{params:r})}monitorMedia(t,e){let r=new s().set("monitor",e),a=`${this.mediaUrl}${t}/monitor`;return this.httpClient.post(a,{},{params:r})}deleteMediaTrailer(t){let e=`${this.mediaUrl}${t}/trailer`;return this.httpClient.delete(e)}getMediaFiles(t){let e=`${this.mediaUrl}${t}/files`;return this.httpClient.get(e).pipe(o(r=>typeof r=="string"?r:d(r)),$(r=>(console.error("Error fetching media files:",r),u(`Error: ${r.message}`))))}fetchMediaFiles(t){return c(this,null,function*(){let e=`${this.mediaUrl}${t}/files`,r=yield f(this.httpClient.get(e));return d(r)})}searchMediaTrailer(t){let e=`${this.mediaUrl}${t}/search`;return this.httpClient.post(e,{})}saveMediaTrailer(t,e){let r=`${this.mediaUrl}${t}/update`,a=new s().set("yt_id",e);return this.httpClient.post(r,{},{params:a})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=w({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{m as a,d as b,T as c};
