import{a as $}from"./chunk-46CR4SRW.js";import{Aa as y,Dc as w,Fc as d,G as a,Gc as c,Z as E,Za as b,a as h,b as f,c as m,da as p,r as n,vb as U,w as g,ya as v,za as C}from"./chunk-4G6SW77C.js";var D=(()=>{class i{constructor(){this.textToCopy=v.required(),this.webSocketService=p($),this.element=p(C),this.element.nativeElement.classList.add("copy")}onClick(){this.copyToClipboard(this.textToCopy()),console.log("Element with copy button clicked!")}copyToClipboard(r){return m(this,null,function*(){if(navigator.clipboard)try{yield navigator.clipboard.writeText(r),this.webSocketService.showToast("Copied to clipboard!")}catch(t){this.webSocketService.showToast("Error copying text to clipboard.","Error"),console.error("Failed to copy: ",t)}else{let t=document.createElement("input");t.value=r,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.webSocketService.showToast("Copied to clipboard!")}})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=b({type:i,selectors:[["","appCopyToClipboard",""]],hostBindings:function(t,e){t&1&&U("click",function(){return e.onClick()})("keydown.enter",function(){return e.onClick()})},inputs:{textToCopy:[1,"textToCopy"]}})}}return i})();var P=(()=>{class i{constructor(){this.http=p(w),this.connectionsUrl=c.apiUrl+c.connections,this.settingsUrl=c.apiUrl+c.settings,this.filesUrl=c.apiUrl+c.files,this.settingsResource=d(()=>this.settingsUrl),this.filesPath=y(""),this.filesResource=d(()=>({url:this.filesUrl+"files_simple",params:{path:this.filesPath()}}),{defaultValue:[]}),this.connectionsResource=d(()=>({url:this.connectionsUrl}),{defaultValue:[]})}getServerStats(){var r=this.settingsUrl+"stats";return this.http.get(r)}updateSetting(r,t){let e=this.settingsUrl+"update";typeof t=="string"&&t===""&&(t=" ");let o={key:r,value:t};return this.http.put(e,o).pipe(a(l=>{let s="";return l.error instanceof ErrorEvent?s=`Error: ${l.error.message}`:s=`Error: ${l.status} ${l.error.detail}`,n(s)}))}updatePassword(r,t,e){let o=this.settingsUrl+"updatelogin",l={current_password:r,new_username:t,new_password:e};return this.http.put(o,l).pipe(a(s=>{let u="";return s.error instanceof ErrorEvent?u=`Error: ${s.error.message}`:u=`Error: ${s.status} ${s.error.detail}`,n(u)}))}getConnection(r){var t=this.connectionsUrl+r;return this.http.get(t).pipe(g(e=>f(h({},e),{added_at:new Date(e.added_at)})))}addConnection(r){return this.http.post(this.connectionsUrl,r).pipe(a(t=>{let e="";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:e=`Error: ${t.status} ${t.error.detail}`,n(e)}))}testConnection(r){var t=this.connectionsUrl+"test";return this.http.post(t,r).pipe(a(e=>{let o="";return e.error instanceof ErrorEvent?o=`Error: ${e.error.message}`:o=`Error: ${e.status} ${e.error.detail}`,n(o)}))}getRootFolders(r){var t=this.connectionsUrl+"rootfolders";return this.http.post(t,r).pipe(a(e=>{let o="";return e.error instanceof ErrorEvent?o=`Error: ${e.error.message}`:o=`Error: ${e.status} ${e.error.detail}`,n(o)}))}updateConnection(r){var t=this.connectionsUrl+r.id;return this.http.put(t,r).pipe(a(e=>{let o="";return e.error instanceof ErrorEvent?o=`Error: ${e.error.message}`:o=`Error: ${e.status} ${e.error.detail}`,n(o)}))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{D as a,P as b};
