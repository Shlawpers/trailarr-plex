import{a as k}from"./chunk-DOTOVB4B.js";import{G as c,Sa as U,Z as v,a as f,b as m,c as g,ca as d,dc as w,qc as $,r as a,ra as y,rb as b,sc as u,tc as l,w as E,wa as C}from"./chunk-RBBTGEQZ.js";var j=(()=>{let s=class s{constructor(){this.textToCopy=w.required(),this.webSocketService=d(k),this.element=d(C),this.element.nativeElement.classList.add("copy")}onClick(){this.copyToClipboard(this.textToCopy()),console.log("Element with copy button clicked!")}copyToClipboard(r){return g(this,null,function*(){if(navigator.clipboard)try{yield navigator.clipboard.writeText(r),this.webSocketService.showToast("Copied to clipboard!")}catch(t){this.webSocketService.showToast("Error copying text to clipboard.","Error"),console.error("Failed to copy: ",t)}else{let t=document.createElement("input");t.value=r,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.webSocketService.showToast("Copied to clipboard!")}})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275dir=U({type:s,selectors:[["","appCopyToClipboard",""]],hostBindings:function(t,e){t&1&&b("click",function(){return e.onClick()})("keydown.enter",function(){return e.onClick()})},inputs:{textToCopy:[1,"textToCopy"]}});let n=s;return n})();var L=(()=>{let s=class s{constructor(){this.http=d($),this.connectionsUrl=l.apiUrl+l.connections,this.settingsUrl=l.apiUrl+l.settings,this.filesUrl=l.apiUrl+l.files,this.settingsResource=u(()=>this.settingsUrl),this.filesPath=y(""),this.filesResource=u(()=>({url:this.filesUrl+"files_simple",params:{path:this.filesPath()}}),{defaultValue:[]}),this.connectionsResource=u(()=>({url:this.connectionsUrl}),{defaultValue:[]})}getServerStats(){var r=this.settingsUrl+"stats";return this.http.get(r)}updateSetting(r,t){let e=this.settingsUrl+"update";typeof t=="string"&&t===""&&(t=" ");let o={key:r,value:t};return this.http.put(e,o).pipe(c(p=>{let i="";return p.error instanceof ErrorEvent?i=`Error: ${p.error.message}`:i=`Error: ${p.status} ${p.error.detail}`,a(i)}))}updatePassword(r,t,e){let o=this.settingsUrl+"updatelogin",p={current_password:r,new_username:t,new_password:e};return this.http.put(o,p).pipe(c(i=>{let h="";return i.error instanceof ErrorEvent?h=`Error: ${i.error.message}`:h=`Error: ${i.status} ${i.error.detail}`,a(h)}))}getConnection(r){var t=this.connectionsUrl+r;return this.http.get(t).pipe(E(e=>m(f({},e),{added_at:new Date(e.added_at)})))}addConnection(r){return this.http.post(this.connectionsUrl,r).pipe(c(t=>{let e="";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:e=`Error: ${t.status} ${t.error.detail}`,a(e)}))}testConnection(r){var t=this.connectionsUrl+"test";return this.http.post(t,r).pipe(c(e=>{let o="";return e.error instanceof ErrorEvent?o=`Error: ${e.error.message}`:o=`Error: ${e.status} ${e.error.detail}`,a(o)}))}getRootFolders(r){var t=this.connectionsUrl+"rootfolders";return this.http.post(t,r).pipe(c(e=>{let o="";return e.error instanceof ErrorEvent?o=`Error: ${e.error.message}`:o=`Error: ${e.status} ${e.error.detail}`,a(o)}))}updateConnection(r){var t=this.connectionsUrl+r.id;return this.http.put(t,r).pipe(c(e=>{let o="";return e.error instanceof ErrorEvent?o=`Error: ${e.error.message}`:o=`Error: ${e.status} ${e.error.detail}`,a(o)}))}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=v({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();export{j as a,L as b};
