import{b as Te,c as K}from"./chunk-F2UT2QAQ.js";import{$ as w,A as R,Aa as fe,Ba as ve,Ca as xe,D as L,G as r,Ga as he,Ha as Ce,I as k,Ia as we,J as H,La as Me,M as ce,Ma as I,N as u,Na as be,O as f,P as N,Qa as Se,R as x,S as ee,T as j,U as z,V as i,W as o,X as g,Y as me,Ya as A,Z as _e,_ as te,_a as $,aa as p,ba as c,c as B,ca as ie,da as Q,db as Y,ea as b,f as V,fa as S,ga as T,h as re,ha as P,ia as pe,ja as l,k as q,ka as h,la as y,ma as ne,na as G,oa as U,p as de,pa as W,qa as ge,r as se,ra as ue,sa as Z,tb as J,u as m,v as _,va as oe,vb as ae,w as C,wa as E,wb as X,x as D,xa as O,ya as F}from"./chunk-SM7CZHZO.js";var ye=(()=>{class t{transform(e){let a=Math.floor(e/60),n=Math.floor(e%60);return a===0?n+"m":n===0?a+"h":a+"h "+n+"m"}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275pipe=ce({name:"durationConvert",type:t,pure:!0})}}return t})();var ke=(()=>{class t{constructor(e){this.httpClient=e,this.files_url=ae.apiUrl+ae.files}getFolderInfo(e){let a=this.files_url+"files",n=new I().set("path",e);return this.httpClient.get(a,{params:n}).pipe(re(d=>typeof d==null?d:Te(d)),q(d=>(console.error("Error fetching media files:",d),V(null))))}getTextFile(e){let a=new I().set("file_path",e),n=this.files_url+"read";return this.httpClient.get(n,{params:a})}getVideoInfo(e){let a=new I().set("file_path",e),n=this.files_url+"video_info";return this.httpClient.get(n,{params:a})}deleteFileFolder(e,a=-1){let n=new I().set("path",e).set("media_id",a),d=this.files_url+"delete";return this.httpClient.delete(d,{params:n})}renameFileFolder(e,a){let n=new I().set("old_path",e).set("new_path",a),d=this.files_url+"rename";return this.httpClient.post(d,{},{params:n})}static{this.\u0275fac=function(a){return new(a||t)(se(be))}}static{this.\u0275prov=de({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var qe=["optionsDialog"],Le=["textDialog"],Qe=["videoDialog"],Ze=["videoDialogContent"],Be=["videoInfoDialog"],Re=["renameDialog"],He=["deleteFileDialog"],De=t=>({folderUntyped:t}),Ne=(t,s)=>s.index;function je(t,s){t&1&&(i(0,"div",11),g(1,"div",33)(2,"div",33)(3,"div",33)(4,"div",33),o())}function ze(t,s){if(t&1&&(i(0,"p",34),l(1),o()),t&2){let e=c(2);r(),y("Error: ",e.filesError(),"")}}function Ge(t,s){t&1&&te(0)}function Ue(t,s){if(t&1&&(i(0,"div",35),g(1,"div"),i(2,"div"),l(3,"Name"),o(),i(4,"div"),l(5,"Size"),o(),i(6,"div"),l(7,"Modified"),o()(),u(8,Ge,1,0,"ng-container",36)),t&2){let e=c(2),a=P(7);r(8),f("ngTemplateOutlet",a)("ngTemplateOutletContext",oe(2,De,e.filesResource.value()))}}function We(t,s){if(t&1&&(i(0,"div",12),u(1,ze,2,1,"p",34)(2,Ue,9,4),o()),t&2){let e=c();r(),x(e.filesResource.error()?1:2)}}function Ae(t,s){t&1&&(C(),i(0,"svg",16),g(1,"path",44),o())}function $e(t,s){t&1&&(C(),i(0,"svg",16),g(1,"path",45),o())}function Ye(t,s){if(t&1&&u(0,Ae,2,0,":svg:svg",16)(1,$e,2,0,":svg:svg",16),t&2){c();let e=Z(0);x(e.isExpanded?0:1)}}function Je(t,s){t&1&&(C(),i(0,"svg",16),g(1,"path",46),o())}function Ke(t,s){t&1&&te(0)}function Xe(t,s){if(t&1&&u(0,Ke,1,0,"ng-container",36),t&2){let e=s.$implicit;c(4);let a=P(7);f("ngTemplateOutlet",a)("ngTemplateOutletContext",oe(2,De,e))}}function et(t,s){if(t&1&&j(0,Xe,1,4,"ng-container",null,ee),t&2){c(2);let e=Z(0);z(e.files)}}function tt(t,s){if(t&1&&(i(0,"div",43),u(1,et,2,0),o()),t&2){c();let e=Z(0);r(),x(e.isExpanded?1:-1)}}function it(t,s){if(t&1){let e=w();ge(0),i(1,"div",37)(2,"div",38),p("click",function(){m(e);let n=Z(0),d=c();return _(d.openFolderOrOptions(n))}),i(3,"div",39),u(4,Ye,2,1)(5,Je,2,0,":svg:svg",16),o(),i(6,"div",40),l(7),o(),i(8,"div",41),l(9),o(),i(10,"div",42),l(11),E(12,"date"),o()(),u(13,tt,2,1,"div",43),o()}if(t&2){let e=s.folderUntyped,a=ue(c().asFolderInfo(e));r(2),N("parent",a.type=="folder"),r(2),x(a.type==="folder"?4:5),r(3),h(a.name),r(2),h(a.size),r(2),h(O(12,8,a.modified)),r(2),x(a.type==="folder"?13:-1)}}function nt(t,s){if(t&1){let e=w();i(0,"div",47),p("click",function(){m(e);let n=c();return n.closeOptionsDialog(),_(n.openVideoDialog())}),i(1,"span"),C(),i(2,"svg",16),g(3,"path",48),o()(),D(),i(4,"span"),l(5,"Play Video"),o()(),i(6,"div",49),p("click",function(){m(e);let n=c();return n.closeOptionsDialog(),_(n.openVideoInfoDialog())}),i(7,"span"),C(),i(8,"svg",16),g(9,"path",50),o()(),D(),i(10,"span"),l(11,"Video Info"),o()()}}function ot(t,s){if(t&1){let e=w();i(0,"div",52),p("click",function(){m(e);let n=c(2);return n.closeOptionsDialog(),_(n.openTextDialog())}),i(1,"span"),C(),i(2,"svg",16),g(3,"path",53),o()(),D(),i(4,"span"),l(5,"View Text"),o()()}}function at(t,s){if(t&1&&u(0,ot,6,0,"div",51),t&2){let e=c();x(e.isTextFile()?0:-1)}}function lt(t,s){t&1&&(i(0,"div",11),g(1,"div",33)(2,"div",33)(3,"div",33)(4,"div",33),o())}function rt(t,s){if(t&1&&(l(0,`
          `),l(1,`
          `),i(2,"code"),l(3),o(),l(4,`
        `)),t&2){let e=s.$implicit;r(3),h(e)}}function dt(t,s){if(t&1){let e=w();i(0,"div",54),p("click",function(n){return m(e),_(n.stopPropagation())}),i(1,"h2"),l(2),o(),i(3,"div",55)(4,"pre"),l(5,"        "),j(6,rt,5,1,null,null,ee),o()(),i(8,"div",27)(9,"button",29),p("click",function(){m(e);let n=c();return _(n.closeTextDialog())}),l(10,"Close"),o()()()}if(t&2){let e=c();r(2),h(e.selectedFileName),r(4),z(e.selectedFileText)}}function st(t,s){t&1&&(i(0,"div",11),g(1,"div",33)(2,"div",33)(3,"div",33)(4,"div",33),o())}function ct(t,s){t&1&&(i(0,"h2"),l(1,"Video Info"),o(),g(2,"hr"),i(3,"code",57),l(4," Unable to fetch video info. "),o())}function mt(t,s){if(t&1&&(i(0,"div",59)(1,"span"),l(2,"Audio Tracks"),o(),i(3,"code"),l(4),o()()),t&2){let e=c(3);r(4),h(e.audioTracks)}}function _t(t,s){if(t&1&&(i(0,"div",59)(1,"span"),l(2,"Subtitles"),o(),i(3,"code"),l(4),o()()),t&2){let e=c(3);r(4),h(e.subtitleTracks)}}function pt(t,s){if(t&1&&(i(0,"div",59)(1,"span"),l(2,"Codec"),o(),i(3,"code"),l(4),o()()),t&2){let e=c().$implicit;r(4),h(e.codec_name)}}function gt(t,s){if(t&1&&(i(0,"div",59)(1,"span"),l(2,"Language"),o(),i(3,"code"),l(4),o()()),t&2){let e=c().$implicit;r(4),h(e.language)}}function ut(t,s){if(t&1&&(i(0,"div",59)(1,"span"),l(2,"Display Dimensions"),o(),i(3,"code"),l(4),o()()),t&2){let e=c().$implicit;r(4),ne("",e.coded_width,"x",e.coded_height,"")}}function ft(t,s){if(t&1&&(i(0,"div",59)(1,"span"),l(2,"Audio Channels"),o(),i(3,"code"),l(4),o()()),t&2){let e=c().$implicit;r(4),h(e.audio_channels)}}function vt(t,s){if(t&1&&(i(0,"div",59)(1,"span"),l(2,"Audio Frequency"),o(),i(3,"code"),l(4),o()()),t&2){let e=c().$implicit;r(4),h(e.sample_rate)}}function xt(t,s){if(t&1&&(i(0,"section")(1,"h2"),l(2),o(),g(3,"hr"),u(4,pt,5,1,"div",59)(5,gt,5,1,"div",59)(6,ut,5,2,"div",59)(7,ft,5,1,"div",59)(8,vt,5,1,"div",59),o()),t&2){let e=s.$implicit;r(2),ne("Track ",e.index,": ",e.codec_type,""),r(2),x(e.codec_name?4:-1),r(),x(e.language?5:-1),r(),x(e.coded_height&&e.coded_width?6:-1),r(),x(e.audio_channels?7:-1),r(),x(e.sample_rate?8:-1)}}function ht(t,s){if(t&1&&(i(0,"section",58)(1,"h2"),l(2,"File Info"),o(),g(3,"hr"),i(4,"div",59)(5,"span"),l(6,"File Name"),o(),i(7,"code"),l(8),o()(),i(9,"div",59)(10,"span"),l(11,"Format"),o(),i(12,"code"),l(13),o()(),i(14,"div",59)(15,"span"),l(16,"Bitrate"),o(),i(17,"code"),l(18),o()(),i(19,"div",59)(20,"span"),l(21,"Duration"),o(),i(22,"code"),l(23),o()(),u(24,mt,5,1,"div",59)(25,_t,5,1,"div",59),o(),j(26,xt,9,7,"section",null,Ne)),t&2){let e=c(2);r(8),h(e.videoInfo.name),r(5),h(e.videoInfo.format_name),r(5),h(e.videoInfo.bitrate),r(5),h(e.videoInfo.duration),r(),x(e.audioTracks.length>0?24:-1),r(),x(e.subtitleTracks.length>0?25:-1),r(),z(e.videoInfo.streams)}}function Ct(t,s){if(t&1){let e=w();i(0,"div",24)(1,"h1"),l(2,"Video Properties"),o(),i(3,"div",56),p("click",function(n){return m(e),_(n.stopPropagation())}),u(4,ct,5,0)(5,ht,28,6),o(),i(6,"div",27)(7,"button",29),p("click",function(){m(e);let n=c();return _(n.closeVideoInfoDialog())}),l(8,"Close"),o()()()}if(t&2){let e=c();r(4),x(e.videoInfo?5:4)}}var Pe=(()=>{class t{constructor(e,a,n){this.mediaService=e,this.filesService=a,this.webSocketService=n,this.mediaId=R.required(),this.filesLoading=!0,this.textFileLoading=!0,this.videoInfoLoading=!0,this.selectedFilePath="",this.selectedFileName="",this.videoInfo=void 0,this.selectedFileText=[],this.filesResource=xe({request:this.mediaId,loader:v=>B(this,[v],function*({request:d}){return this.filesLoading=!0,yield this.mediaService.fetchMediaFiles(d)})}),this.filesError=fe(()=>this.filesResource.error().error.detail),this.audioTracks="",this.subtitleTracks=""}asFolderInfo(e){return e}isTextFile(){return[".txt",".srt",".log",".json",".py",".sh"].some(a=>this.selectedFileName.endsWith(a))}isVideoFile(){return[".mp4",".mkv",".avi",".webm"].some(a=>this.selectedFileName.endsWith(a))}openFolderOrOptions(e){e.type==="folder"?e.isExpanded=!e.isExpanded:(this.selectedFilePath=e.path,this.selectedFileName=e.name,this.openOptionsDialog())}renameFile(){this.closeRenameDialog();let a=this.selectedFilePath.split("/").slice(0,-1).join("/")+"/"+this.selectedFileName;this.filesService.renameFileFolder(this.selectedFilePath,a).subscribe(n=>{let d="";n?d="File renamed successfully!":d="Failed to rename file!",this.webSocketService.showToast(d,n?"success":"error"),this.filesResource.reload()})}deleteFile(){this.closeDeleteFileDialog(),this.filesService.deleteFileFolder(this.selectedFilePath,this.mediaId()).subscribe(e=>{let a="";e?a="Deleted successfully!":a="Failed to delete!",this.webSocketService.showToast(a,e?"success":"error"),this.filesResource.reload()})}openOptionsDialog(){this.optionsDialog.nativeElement.showModal()}closeOptionsDialog(){this.optionsDialog.nativeElement.close()}openTextDialog(){this.closeOptionsDialog(),this.textFileLoading=!0,this.selectedFileText=[],this.textDialog.nativeElement.showModal(),this.filesService.getTextFile(this.selectedFilePath).subscribe(e=>{for(let a of e.split(`
`))this.selectedFileText.push(a);this.textFileLoading=!1})}closeTextDialog(){this.textDialog.nativeElement.close()}openVideoDialog(){this.videoDialog.nativeElement.showModal();let a=`
      <style>
        video {
          width: 75vw;
          height: auto;
        }
        @media (max-width: 768px) {
          video {
            width: 100%;
          }
        }
      </style>
      <video controls controlsList="nodownload">
        <source src="${`/api/v1/files/video?file_path=${encodeURIComponent(this.selectedFilePath)}`}" type="video/mp4">
        Your browser does not support the video tag.</source>
      </video>`;this.videoDialogContent.nativeElement.innerHTML=a}closeVideoDialog(){this.videoDialogContent.nativeElement.innerHTML="",this.videoDialog.nativeElement.close()}openVideoInfoDialog(){this.videoInfoLoading=!0,this.audioTracks="",this.subtitleTracks="",this.videoInfoDialog.nativeElement.showModal(),this.filesService.getVideoInfo(this.selectedFilePath).subscribe(e=>{let a=[],n=[];for(let d of e.streams)if(d.codec_type.includes("audio")){let v=d.language?d.language:"unk";v=v+" ("+d.codec_name+")",a.push(v)}else if(d.codec_type.includes("subtitle")){let v=d.language?d.language:"unk";v=v+" ("+d.codec_name+")",n.push(v)}this.audioTracks=a.join(", "),this.subtitleTracks=n.join(", "),this.videoInfo=e,this.videoInfoLoading=!1})}closeVideoInfoDialog(){this.videoInfoDialog.nativeElement.close(),this.videoInfo=void 0}openRenameDialog(){this.closeOptionsDialog(),this.renameDialog.nativeElement.showModal()}closeRenameDialog(){this.renameDialog.nativeElement.close()}openDeleteFileDialog(){this.closeOptionsDialog(),this.deleteFileDialog.nativeElement.showModal()}closeDeleteFileDialog(){this.deleteFileDialog.nativeElement.close()}static{this.\u0275fac=function(a){return new(a||t)(k(K),k(ke),k(X))}}static{this.\u0275cmp=H({type:t,selectors:[["media-files"]],viewQuery:function(a,n){if(a&1&&(b(qe,5),b(Le,5),b(Qe,5),b(Ze,5),b(Be,5),b(Re,5),b(He,5)),a&2){let d;S(d=T())&&(n.optionsDialog=d.first),S(d=T())&&(n.textDialog=d.first),S(d=T())&&(n.videoDialog=d.first),S(d=T())&&(n.videoDialogContent=d.first),S(d=T())&&(n.videoInfoDialog=d.first),S(d=T())&&(n.renameDialog=d.first),S(d=T())&&(n.deleteFileDialog=d.first)}},inputs:{mediaId:[1,"mediaId"]},decls:69,vars:6,consts:[["folFileTemplate",""],["optionsDialog",""],["optionsDialogContent",""],["textDialog",""],["videoDialog",""],["videoDialogContent",""],["videoInfoDialog",""],["renameDialog",""],["deleteFileDialog",""],[1,"media-files-container"],[1,"text-md","files-title"],[1,"loading-wave","center"],[1,"media-files"],[3,"click"],[1,"dialog-content",3,"click"],[1,"close",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","m249-186-63-63 231-231-231-230 63-64 231 230 231-230 63 64-230 230 230 231-63 63-231-230-231 230Z"],[1,"dialog-options"],["title","Rename",1,"icon-link",3,"click"],["d","M81-5v-138h798V-5H81Zm150-327h30l371-371-13.35-15.86L604-733 231-362v30Zm-68 69v-126l486-488q10-9 23.11-14.5 13.12-5.5 26-5.5 12.89 0 25.89 5.75T748-876l28 25q12 10 17 23.99 5 13.99 5 26.52 0 13.17-5.46 26.76Q787.09-760.14 777-751L288-263H163Zm563-538-27-27 27 27Zm-94 98-13.35-15.86L604-733l28 30Z"],["title","Delete",1,"icon-link","danger-option",3,"click"],["d","M253-99q-38.21 0-65.11-26.6Q161-152.2 161-190v-552h-58v-91h228v-47h297v47h228v91h-58v552q0 37.18-27.21 64.09Q743.59-99 706-99H253Zm453-643H253v552h453v-552ZM357-268h74v-398h-74v398Zm173 0h75v-398h-75v398ZM253-742v552-552Z"],[1,"text-dialog"],[1,"info-dialog"],[1,"rename-dialog",3,"click"],["id","rename-file","type","text","placeholder","New Name",1,"rename-input",3,"ngModelChange","ngModel"],[1,"buttons-row"],[1,"primary",3,"click"],[1,"tertiary",3,"click"],["id","deleteFileDialog",3,"click"],[1,"delete-dialog",3,"click"],[1,"danger",3,"click"],[1,"loading-bar"],[1,"text-sm","text-center"],[1,"files-header","sm-none","text-sm"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"files-accordion"],[1,"files-header",3,"click"],[1,"files-icon"],[1,"files-name"],[1,"files-size"],[1,"files-modified"],[1,"child"],["d","M146.67-160q-26.34 0-46.5-20.17Q80-200.33 80-226.67v-506.66q0-26.34 20.17-46.5Q120.33-800 146.67-800H414l66.67 66.67h332.66q26.34 0 46.5 20.16Q880-693 880-666.67H146.67v440l100-373.33H940L834.33-209.67q-6.66 24.67-24.5 37.17Q792-160 766.67-160h-620Z"],["d","M146.67-160q-27 0-46.84-20.17Q80-200.33 80-226.67v-506.66q0-26.34 19.83-46.5Q119.67-800 146.67-800H414l66.67 66.67h332.66q26.34 0 46.5 20.16Q880-693 880-666.67v440q0 26.34-20.17 46.5Q839.67-160 813.33-160H146.67Z"],["d","M319.33-246.67h321.34v-66.66H319.33v66.66Zm0-166.66h321.34V-480H319.33v66.67ZM226.67-80q-27 0-46.84-19.83Q160-119.67 160-146.67v-666.66q0-27 19.83-46.84Q199.67-880 226.67-880H574l226 226v507.33q0 27-19.83 46.84Q760.33-80 733.33-80H226.67Zm314-542.67h192.66L540.67-813.33v190.66Z"],["title","Play Video",1,"icon-link",3,"click"],["d","M320-203v-560l440 280-440 280Zm60-280Zm0 171 269-171-269-171v342Z"],["title","Video Info",1,"icon-link",3,"click"],["d","M447-272h73v-248h-73v248Zm32.89-330Q496-602 507-612.59q11-10.58 11-26.23 0-17.63-10.87-28.4Q496.26-678 480.19-678q-17.19 0-27.69 10.6T442-639.68q0 16.28 10.89 26.98 10.9 10.7 27 10.7Zm-.08 538q-85.92 0-161.52-33.02-75.61-33.02-131.93-89.34-56.32-56.32-89.34-132.13T64-480.5q0-86.09 33.08-161.81t89.68-132.31q56.61-56.59 132.06-88.99Q394.27-896 480.06-896q86.15 0 162.17 32.39 76.02 32.4 132.4 89Q831-718 863.5-641.96 896-565.92 896-479.72q0 86.19-32.39 161.29-32.4 75.11-88.99 131.51Q718.03-130.53 642-97.26 565.98-64 479.81-64Zm.69-73q142.01 0 242.26-100.74Q823-338.49 823-480.5T722.94-722.76Q622.89-823 480-823q-141.51 0-242.26 100.06Q137-622.89 137-480q0 141.51 100.74 242.26Q338.49-137 480.5-137Zm-.5-343Z"],["title","View Text",1,"icon-link"],["title","View Text",1,"icon-link",3,"click"],["d","M321-250h318v-69H321v69Zm0-169h319v-68H321v68ZM229-59q-35.78 0-63.39-26.91Q138-112.83 138-150v-660q0-37.59 27.61-64.79Q193.22-902 229-902h364l230 228v524q0 37.17-27.91 64.09Q767.19-59 731-59H229Zm316-569v-182H229v660h502v-478H545ZM229-810v182-182 660-660Z"],[1,"text-dialog",3,"click"],[1,"text-content"],[1,"info-container",3,"click"],[1,"video-info"],["open",""],[1,"info-content"]],template:function(a,n){if(a&1){let d=w();i(0,"div",9)(1,"p",10),l(2,"Files"),o(),g(3,"hr"),u(4,je,5,0,"div",11)(5,We,3,1,"div",12),o(),u(6,it,14,10,"ng-template",null,0,F),i(8,"dialog",13,1),p("click",function(){return m(d),_(n.closeOptionsDialog())}),i(10,"div",14,2),p("click",function(M){return m(d),_(M.stopPropagation())}),i(12,"h2"),l(13,"Options"),o(),i(14,"i",15),p("click",function(){return m(d),_(n.closeOptionsDialog())}),C(),i(15,"svg",16),g(16,"path",17),o()(),D(),i(17,"div",18),u(18,nt,12,0)(19,at,1,1),i(20,"div",19),p("click",function(){return m(d),_(n.openRenameDialog())}),i(21,"span"),C(),i(22,"svg",16),g(23,"path",20),o()(),D(),i(24,"span"),l(25,"Rename"),o()(),i(26,"div",21),p("click",function(){return m(d),_(n.openDeleteFileDialog())}),i(27,"span"),C(),i(28,"svg",16),g(29,"path",22),o()(),D(),i(30,"span"),l(31,"Delete"),o()()()()(),i(32,"dialog",13,3),p("click",function(){return m(d),_(n.closeTextDialog())}),u(34,lt,5,0,"div",11)(35,dt,11,1,"div",23),o(),i(36,"dialog",13,4),p("click",function(){return m(d),_(n.closeVideoDialog())}),i(38,"div",13,5),p("click",function(M){return m(d),_(M.stopPropagation())}),o()(),i(40,"dialog",13,6),p("click",function(){return m(d),_(n.closeVideoInfoDialog())}),u(42,st,5,0,"div",11)(43,Ct,9,1,"div",24),o(),i(44,"dialog",13,7),p("click",function(){return m(d),_(n.closeRenameDialog())}),i(46,"div",25),p("click",function(M){return m(d),_(M.stopPropagation())}),i(47,"h2"),l(48,"Rename"),o(),i(49,"input",26),W("ngModelChange",function(M){return m(d),U(n.selectedFileName,M)||(n.selectedFileName=M),_(M)}),o(),i(50,"div",27)(51,"button",28),p("click",function(){return m(d),_(n.renameFile())}),l(52,"Rename"),o(),i(53,"button",29),p("click",function(){return m(d),_(n.closeRenameDialog())}),l(54,"Cancel"),o()()()(),i(55,"dialog",30,8),p("click",function(){return m(d),_(n.closeDeleteFileDialog())}),i(57,"div",31),p("click",function(M){return m(d),_(M.stopPropagation())}),i(58,"h3"),l(59,"Confirm Delete"),o(),i(60,"code"),l(61),o(),i(62,"p"),l(63,"Are you sure you want to delete this file?"),o(),i(64,"div",27)(65,"button",32),p("click",function(){return m(d),_(n.deleteFile())}),l(66,"Confirm"),o(),i(67,"button",29),p("click",function(){return m(d),_(n.closeDeleteFileDialog())}),l(68,"Cancel"),o()()()()}a&2&&(r(4),x(n.filesResource.isLoading()?4:5),r(14),x(n.isVideoFile()?18:19),r(16),x(n.textFileLoading?34:35),r(8),x(n.videoInfoLoading?42:43),r(7),G("ngModel",n.selectedFileName),r(12),h(n.selectedFileName))},dependencies:[Me,J,A,$,Y,Ce],styles:['[_nghost-%COMP%]{display:contents}.center[_ngcontent-%COMP%]{margin:auto}.text-center[_ngcontent-%COMP%]{text-align:center}.media-files-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1rem}.media-files-container[_ngcontent-%COMP%]   .media-files[_ngcontent-%COMP%]{width:100%;display:block;border:1px solid var(--color-outline);border-radius:4px;background-color:var(--color-surface-container-high);color:var(--color-on-surface-variant);overflow-y:auto}.media-files-container[_ngcontent-%COMP%]   .files-title[_ngcontent-%COMP%]{margin:0;margin-block:0}.files-header[_ngcontent-%COMP%]{grid-row:1;display:grid;grid-template-columns:auto 6fr 1fr 2fr;gap:.5rem;align-items:center;text-align:center;padding:1rem;border:none;outline:none;transition:.4s;border-top:1px solid var(--color-outline);position:relative;font-size:.75rem}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]{grid-template-columns:auto auto auto;grid-template-rows:1fr auto}}.files-header[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:50%;left:-1rem;width:1rem;height:1px;background-color:var(--color-outline)}.files-accordion[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-rows:1fr auto;border-left:1px solid var(--color-outline);position:relative}.files-accordion[_ngcontent-%COMP%]   .parent[_ngcontent-%COMP%]{cursor:pointer}.files-accordion[_ngcontent-%COMP%]   .child[_ngcontent-%COMP%]{grid-row:2;padding:0 0 0 1rem;position:relative;cursor:pointer}.child[_ngcontent-%COMP%]   .files-accordion[_ngcontent-%COMP%]:last-child{border-bottom:1px solid var(--color-outline);margin-bottom:1rem}.files-header[_ngcontent-%COMP%]   .files-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]   .files-icon[_ngcontent-%COMP%]{grid-row:1 / span 2;grid-column:1;justify-self:center}}.files-header[_ngcontent-%COMP%]   .files-name[_ngcontent-%COMP%]{font-size:1rem;text-align:left;display:flex;align-items:center;gap:.25rem}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]   .files-name[_ngcontent-%COMP%]{grid-row:1;grid-column:2 / span 2;justify-self:start}}.files-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-on-surface)}@media (max-width: 765px){.files-header[_ngcontent-%COMP%]   .files-size[_ngcontent-%COMP%]{grid-row:2;grid-column:2;justify-self:start;margin-left:.25rem}.files-header[_ngcontent-%COMP%]   .files-modified[_ngcontent-%COMP%]{grid-row:2;grid-column:3;justify-self:end}}dialog[_ngcontent-%COMP%]   .loading-wave[_ngcontent-%COMP%]{margin:4rem}.dialog-content[_ngcontent-%COMP%]{margin:1rem;position:relative}.dialog-header[_ngcontent-%COMP%]{position:relative}.dialog-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;border-radius:50%}.dialog-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:2rem;width:2rem;fill:var(--color-on-surface);padding:0}.dialog-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}.icon-link[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none;transition:all .4s;cursor:pointer;padding:1rem 3rem 1rem 0;border-bottom:1px solid var(--color-outline);font-size:1.25rem}.icon-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:1.5rem}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:var(--color-on-surface);padding:0;margin:0 .5rem}.danger-option[_ngcontent-%COMP%]{color:var(--color-error)}.danger-option[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-error)}.rename-dialog[_ngcontent-%COMP%], .delete-dialog[_ngcontent-%COMP%], .text-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1.5rem;margin:1.5rem;max-width:75vw;max-height:75vh}@media (width < 765px){.rename-dialog[_ngcontent-%COMP%], .delete-dialog[_ngcontent-%COMP%], .text-dialog[_ngcontent-%COMP%]{max-width:90vw;margin:1rem}}.delete-dialog[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:0 1rem 1rem;margin:0;gap:1rem}#deleteFileDialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.text-content[_ngcontent-%COMP%]{max-width:75vw;max-height:70vh;overflow-y:auto;border:1px solid var(--color-outline);border-radius:1rem;margin:.25rem}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{padding:1rem;white-space:pre-wrap;word-wrap:break-word;text-align:start;counter-reset:listing;line-height:0;--indent: 2rem;--lineHeight: 2}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing;display:block;padding:0 0 0 var(--indent);text-indent:calc(-1 * var(--indent));margin:0;line-height:var(--lineHeight)}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";display:inline-block;width:var(--indent);padding-left:auto;margin-left:auto;text-align:right;color:var(--color-outline)}@media (width < 765px){.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{padding:.5rem;--indentSm: 1.5rem;--lineHeightSm: 1.25}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:0 0 0 var(--indentSm);text-indent:calc(-1 * var(--indentSm));line-height:var(--lineHeightSm)}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{width:var(--indentSm)}}.buttons-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;gap:1rem;width:70%}.rename-input[_ngcontent-%COMP%]{field-sizing:content;min-width:50vw;max-width:75vw;padding:1rem;border:1px solid var(--color-outline);border-radius:1rem;font-size:1.2rem}@media (width < 765px){.rename-input[_ngcontent-%COMP%]{max-width:90vw}}.info-dialog[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:1.5rem;max-width:75vw;align-items:center;max-height:75vh}@media (width < 765px){.info-dialog[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%]{max-width:90vw}}.info-container[_ngcontent-%COMP%]{max-height:65vh;overflow-y:auto}section[_ngcontent-%COMP%]{width:100%}.info-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin:1rem .5rem;gap:1rem}@media (width < 765px){.info-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}}.info-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .info-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;text-align:left;width:30%}@media (width < 765px){.info-content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .info-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;font-weight:unset;font-style:italic;font-size:small}}.info-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(2){text-decoration:none;text-align:left;margin:0;padding:.25rem}']})}}return t})();var wt=["deleteDialog"];function Mt(t,s){t&1&&(i(0,"div",10),g(1,"div",11)(2,"div",11)(3,"div",11)(4,"div",11),o())}function bt(t,s){t&1&&(C(),i(0,"svg",48),g(1,"path",49),o())}function St(t,s){if(t&1&&(i(0,"div",46),u(1,bt,2,0,"svg",47),o()),t&2){let e=c(3);r(),f("ngIf",e.media.trailer_exists)}}function Tt(t,s){t&1&&(i(0,"div",52),C(),i(1,"svg",53),g(2,"path",54),o()())}function yt(t,s){t&1&&(C(),i(0,"svg",58),g(1,"path",59),o())}function kt(t,s){if(t&1&&(i(0,"span"),u(1,yt,2,0,"svg",57),o()),t&2){let e=c(5);r(),f("ngIf",e.media.monitor)}}function Dt(t,s){t&1&&(i(0,"span"),C(),i(1,"svg",60),g(2,"path",61),o()())}function Pt(t,s){if(t&1){let e=w();i(0,"div",55),p("click",function(){m(e);let n=c(4);return n.isLoadingMonitor=!0,_(n.monitorSeries())}),u(1,kt,2,1,"span",56)(2,Dt,3,0,"span",56),o()}if(t&2){let e=c(4);f("title",e.media.monitor?"Monitored, click to change":"Not Monitored, click to change"),r(),f("ngIf",e.media.monitor),r(),f("ngIf",!e.media.monitor)}}function Et(t,s){if(t&1&&u(0,Tt,3,0,"div",50)(1,Pt,3,3,"div",51),t&2){let e=c(3);f("ngIf",e.isLoadingMonitor),r(),f("ngIf",!e.isLoadingMonitor)}}function Ot(t,s){if(t&1&&(i(0,"a",62),g(1,"img",63),o()),t&2){let e=c(3);Q("href","https://www.imdb.com/title/",e.media.imdb_id,"/",L)}}function Ft(t,s){if(t&1&&(i(0,"a",65),g(1,"img",66),o()),t&2){let e=c(4);Q("href","https://www.themoviedb.org/movie/",e.media.txdb_id,"",L)}}function It(t,s){if(t&1&&(me(0),u(1,Ft,2,2,"a",64),_e()),t&2){let e=c(3);r(),f("ngIf",e.media.txdb_id)}}function Vt(t,s){if(t&1&&(i(0,"a",68),g(1,"img",69),o()),t&2){let e=c(4);Q("href","https://www.thetvdb.com/?tab=series&id=",e.media.txdb_id,"",L)}}function qt(t,s){if(t&1&&u(0,Vt,2,2,"a",67),t&2){let e=c(3);f("ngIf",e.media.txdb_id)}}function Lt(t,s){if(t&1){let e=w();i(0,"span",70),p("click",function(){m(e);let n=c(3);return _(n.searchTrailer())}),C(),i(1,"svg",71),g(2,"path",72),o()()}}function Qt(t,s){t&1&&(i(0,"span",40),C(),i(1,"svg",73)(2,"circle",74),g(3,"animate",75),o(),i(4,"circle",76),g(5,"animate",77),o(),i(6,"circle",78),g(7,"animate",79),o()()())}function Zt(t,s){if(t&1){let e=w();i(0,"button",81),p("click",function(){m(e);let n=c(4);return _(n.saveYtId())}),C(),i(1,"svg",71),g(2,"path",82),o()()}}function Bt(t,s){if(t&1&&u(0,Zt,3,0,"button",80),t&2){let e=c(3);f("ngIf",e.trailer_url!=e.media.youtube_trailer_id)}}function Rt(t,s){t&1&&(i(0,"p",83),l(1,"Click Download to download trailer from updated link!"),o())}function Ht(t,s){if(t&1){let e=w();i(0,"button",84),p("click",function(){m(e);let n=c(3);return _(n.openTrailer())}),l(1,"Watch"),o()}}function Nt(t,s){t&1&&(i(0,"span",87),C(),i(1,"svg",53),g(2,"path",54),o()())}function jt(t,s){if(t&1){let e=w();i(0,"button",85),p("click",function(){m(e);let n=c(3);return n.isLoadingDownload=!0,_(n.downloadTrailer())}),i(1,"span"),l(2,"Download "),o(),u(3,Nt,3,0,"span",86),o()}if(t&2){let e=c(3);f("disabled",e.isLoadingDownload||e.media.status=="downloading"),r(3),f("ngIf",e.isLoadingDownload||e.media.status=="downloading")}}function zt(t,s){if(t&1){let e=w();i(0,"button",88),p("click",function(){m(e);let n=c(3);return _(n.showDeleteDialog())}),l(1,"Delete"),o()}}function Gt(t,s){if(t&1){let e=w();i(0,"div",14),g(1,"div",15),i(2,"div",16),g(3,"img",17),o(),i(4,"div",18)(5,"div",19),u(6,St,2,1,"div",20)(7,Et,2,2,"ng-template",null,2,F),i(9,"span",21),p("click",function(){m(e);let n=c(2);return _(n.copyToClipboard(n.media.title))}),l(10),o()(),i(11,"div",19)(12,"span",22),l(13),o(),i(14,"span",22),E(15,"durationConvert"),l(16),E(17,"durationConvert"),o()(),i(18,"div",19),u(19,Ot,2,2,"a",23)(20,It,2,1,"ng-container",24)(21,qt,1,1,"ng-template",null,3,F),o(),i(23,"div",25)(24,"span")(25,"div",26)(26,"span",27),l(27,"Path"),o(),i(28,"span",28),p("click",function(){m(e);let n=c(2);return _(n.copyToClipboard(n.media.folder_path))}),i(29,"code"),l(30),o()()()(),i(31,"span")(32,"div",29)(33,"span",27),l(34,"Status"),o(),i(35,"span",30),l(36),E(37,"titlecase"),i(38,"span",31)(39,"p"),l(40),o(),i(41,"p"),l(42),o(),i(43,"p"),l(44),o(),i(45,"p"),l(46),o(),i(47,"p"),l(48),o()()()()()(),i(49,"div",19)(50,"div",32)(51,"span",27),l(52,"Overview"),o(),i(53,"span",33),l(54),o()()(),i(55,"div",19)(56,"div",29)(57,"span",27),l(58,"Trailer"),o(),i(59,"div",34)(60,"div",35)(61,"span",36),l(62,"https://www.youtube.com/watch?v="),o(),i(63,"span",37),l(64,"Youtube ID/URL:"),o(),i(65,"input",38),W("ngModelChange",function(n){m(e);let d=c(2);return U(d.trailer_url,n)||(d.trailer_url=n),_(n)}),o()(),u(66,Lt,3,0,"span",39)(67,Qt,8,0,"span",40)(68,Bt,1,1,"button",41),o(),u(69,Rt,2,0,"p",42),o()(),i(70,"div",19),u(71,Ht,2,0,"button",43)(72,jt,4,2,"button",44)(73,zt,2,0,"button",45),o()()()}if(t&2){let e=P(8),a=P(22),n=c(2);r(),pe("background-image: url(",n.media.fanart_path,");"),r(),N("sm-none",!n.media.poster_path),Q("title","",n.media.title," Poster"),r(),ie("src",n.media.poster_path||"assets/poster-lg.png",L),ie("alt",n.media.title),r(3),f("ngIf",n.media.trailer_exists)("ngIfElse",e),r(3),f("title",n.media.title),r(),y(" ",n.media.title," "),r(2),f("title",n.media.year),r(),h(n.media.year),r(),f("title",O(15,37,n.media.runtime)),r(2),h(O(17,39,n.media.runtime)),r(3),f("ngIf",n.media.imdb_id),r(),f("ngIf",n.media.is_movie)("ngIfElse",a),r(5),f("title",n.media.folder_path),r(5),h(n.media.folder_path),r(6),y("",O(37,41,n.media.status)," "),r(4),y("Monitored: ",n.media.monitor,""),r(2),y("Downloaded: ",n.media.trailer_exists,""),r(2),y("Added: ",n.media.added_at.toLocaleString(),""),r(2),y("Updated: ",n.media.updated_at.toLocaleString(),""),r(2),y("Downloaded: ",n.media.downloaded_at.toLocaleString()||"",""),r(6),h(n.media.overview),r(11),G("ngModel",n.trailer_url),r(),x(n.media.youtube_trailer_id==""&&n.trailer_url==""&&!n.isLoadingDownload?66:-1),r(),x(n.isLoadingDownload?67:-1),r(),x(n.trailer_url!=n.media.youtube_trailer_id&&!n.isLoadingDownload?68:-1),r(),f("ngIf",n.trailer_url!=n.media.youtube_trailer_id),r(2),f("ngIf",n.media.youtube_trailer_id),r(),f("ngIf",!n.media.trailer_exists||n.media.youtube_trailer_id!=n.trailer_url),r(),f("ngIf",n.media.trailer_exists)}}function Ut(t,s){if(t&1&&(u(0,Gt,74,43,"div",12),g(1,"media-files",13)),t&2){let e=c();f("ngIf",e.media),r(),f("mediaId",e.mediaId())}}var Ee=(()=>{class t{constructor(e,a,n){this.mediaService=e,this.route=a,this.websocketService=n,this.mediaId=R(0,{transform:Number}),this.media=void 0,this.isLoading=!0,this.isLoadingMonitor=!1,this.isLoadingDownload=!1,this.trailer_url="",this.mediaEffect=ve(()=>{this.isLoading=!0,this.getMediaData()})}copyToClipboard(e){return B(this,null,function*(){if(navigator.clipboard)try{yield navigator.clipboard.writeText(e),this.websocketService.showToast("Copied to clipboard!")}catch(a){this.websocketService.showToast("Error copying text to clipboard.","Error"),console.error("Failed to copy: ",a)}else{let a=document.createElement("input");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),this.websocketService.showToast("Copied to clipboard!")}})}ngOnInit(){this.isLoading=!0,this.webSocketSubscription=this.websocketService.toastMessage.subscribe(()=>{this.getMediaData()})}ngOnDestroy(){this.webSocketSubscription?.unsubscribe()}getMediaData(){this.mediaService.getMediaByID(this.mediaId()).subscribe(e=>{this.media=e,this.trailer_url=e.youtube_trailer_id,this.isLoading=!1})}downloadTrailer(){let e=this.media?.youtube_trailer_id?.toLowerCase()||"";this.trailer_url.toLowerCase().includes(e)&&this.media?.trailer_exists||(this.isLoadingDownload=!0,this.mediaService.downloadMediaTrailer(this.mediaId(),this.trailer_url).subscribe(n=>{console.log(n)}))}monitorSeries(){this.isLoadingMonitor=!0;let e=!this.media?.monitor;this.mediaService.monitorMedia(this.mediaId(),e).subscribe(a=>{console.log(a),this.media.monitor=e,this.isLoadingMonitor=!1})}searchTrailer(){this.websocketService.showToast("Searching for trailer..."),this.isLoadingDownload=!0,this.mediaService.searchMediaTrailer(this.mediaId()).pipe(q(e=>(console.error("Error searching trailer:",e.error.detail),this.websocketService.showToast(e.error.detail,"Error"),this.isLoadingDownload=!1,V("")))).subscribe(e=>{e&&(this.media.youtube_trailer_id=e,this.trailer_url=e),this.isLoadingDownload=!1})}saveYtId(){this.websocketService.showToast("Saving youtube id..."),this.isLoadingDownload=!0,this.mediaService.saveMediaTrailer(this.mediaId(),this.trailer_url).pipe(q(e=>(console.error("Error searching trailer:",e.error.detail),this.websocketService.showToast(e.error.detail,"Error"),this.isLoadingDownload=!1,V("")))).subscribe(e=>{e&&(this.media.youtube_trailer_id=e,this.trailer_url=e),this.isLoadingDownload=!1})}openTrailer(){this.media?.youtube_trailer_id&&window.open(`https://www.youtube.com/watch?v=${this.media.youtube_trailer_id}`,"_blank")}showDeleteDialog(){this.deleteDialog.nativeElement.showModal()}closeDeleteDialog(){this.deleteDialog.nativeElement.close()}onConfirmDelete(){this.closeDeleteDialog(),this.mediaService.deleteMediaTrailer(this.mediaId()).subscribe(e=>{console.log(e),this.media.trailer_exists=!1})}static{this.\u0275fac=function(a){return new(a||t)(k(K),k(Se),k(X))}}static{this.\u0275cmp=H({type:t,selectors:[["app-media-details"]],viewQuery:function(a,n){if(a&1&&b(wt,5),a&2){let d;S(d=T())&&(n.deleteDialog=d.first)}},inputs:{mediaId:[1,"mediaId"]},decls:17,vars:2,consts:[["mediaLoaded",""],["deleteDialog",""],["noTrailer",""],["showTVDBLogo",""],[1,"media-details-container"],["class","loading-wave center",4,"ngIf","ngIfElse"],[3,"click"],[1,"dialog-content",3,"click"],["tabindex","2",1,"danger",3,"click"],["tabindex","1",1,"secondary",3,"click"],[1,"loading-wave","center"],[1,"loading-bar"],["class","media-details-card",4,"ngIf"],[3,"mediaId"],[1,"media-details-card"],[1,"media-fanart-overlay"],[1,"media-poster",3,"title"],[3,"src","alt"],[1,"media-details-col"],[1,"media-details-row"],["class","icon-link","title","Trailer Downloaded",4,"ngIf","ngIfElse"],[1,"text-lg","title-text","copy",3,"click","title"],[1,"text-md",3,"title"],["target","_blank","title","IMDB Link",3,"href",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"media-details-row","extras"],[1,"labeled-text",3,"title"],[1,"label"],[1,"text-sm","copy",3,"click"],[1,"labeled-text"],[1,"text-sm","tooltip"],[1,"tooltiptext"],["title","Overview",1,"labeled-text"],[1,"text-sm"],[1,"input-row"],[1,"labeled-input"],[1,"text-md","sm-none"],[1,"text-md","sm-show"],["id","youtube_trailer_id","type","text","placeholder","Youtube Video ID / URL",3,"ngModelChange","ngModel"],["title","Search Trailer",1,"search-button","icon-link"],["title","Searching for Trailer",1,"loading-search","icon-link"],["id","update_trailer_search_query","tabindex","24",1,"primary","icononly-button","save-button","success"],["class","text-sm info-text",4,"ngIf"],["class","primary","title","Watch Trailer on Youtube",3,"click",4,"ngIf"],["class","primary","title","Download Trailer",3,"disabled","click",4,"ngIf"],["class","danger","title","Delete Trailer",3,"click",4,"ngIf"],["title","Trailer Downloaded",1,"icon-link"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","class","downloaded-icon success","aria-label","Trailer Exists",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Trailer Exists",1,"downloaded-icon","success"],["d","M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q65 0 123 19t107 53l-58 59q-38-24-81-37.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-18-2-36t-6-35l65-65q11 32 17 66t6 70q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-56-216L254-466l56-56 114 114 400-401 56 56-456 457Z"],["class","icon-link","title","Updating Monitor Status",4,"ngIf"],["class","icon-link",3,"title","click",4,"ngIf"],["title","Updating Monitor Status",1,"icon-link"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"loading"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],[1,"icon-link",3,"click","title"],[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","class","monitored-icon","aria-label","Monitored",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Monitored",1,"monitored-icon"],["d","M713-600 600-713l56-57 57 57 141-142 57 57-198 198ZM200-120v-640q0-33 23.5-56.5T280-840h280q-20 30-30 57.5T520-720q0 72 45.5 127T680-524q23 3 40 3t40-3v404L480-240 200-120Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-label","Not Monitored",1,"not-monitored-icon"],["d","M200-120v-640q0-33 23.5-56.5T280-840h240v80H280v518l200-86 200 86v-278h80v400L480-240 200-120Zm80-640h240-240Zm400 160v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z"],["target","_blank","title","IMDB Link",3,"href"],["src","assets/IMDBlogo.png","alt","IMDB",1,"xdb-icon"],["target","_blank","title","TMDB Link",3,"href",4,"ngIf"],["target","_blank","title","TMDB Link",3,"href"],["src","assets/TMDBlogo.png","alt","TMDB",1,"xdb-icon"],["target","_blank","title","TVDB Link",3,"href",4,"ngIf"],["target","_blank","title","TVDB Link",3,"href"],["src","assets/TVDBlogo.png","alt","TVDB",1,"xdb-icon"],["title","Search Trailer",1,"search-button","icon-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M801-108 537-372q-31 26-72.96 40-41.96 14-86.6 14-114.6 0-192.52-78Q107-474 107-586t78-190q78-78 190-78t190 78q78 78 78 190.15 0 43.85-13.5 84.35Q616-461 588-425l266 264-53 53ZM375.5-391q81.75 0 138.13-56.79Q570-504.58 570-586q0-81.42-56.29-138.21Q457.43-781 375.59-781q-82.67 0-139.13 56.79Q180-667.42 180-586q0 81.42 56.46 138.21Q292.92-391 375.5-391Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 200 200"],["stroke-width","14","r","15","cx","40","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","-.4"],["stroke-width","14","r","15","cx","100","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","-.2"],["stroke-width","14","r","15","cx","160","cy","65"],["attributeName","cy","calcMode","spline","dur","2","values","65;135;65;","keySplines",".5 0 .5 1;.5 0 .5 1","repeatCount","indefinite","begin","0"],["class","primary icononly-button save-button success","id","update_trailer_search_query","tabindex","24",3,"click",4,"ngIf"],["id","update_trailer_search_query","tabindex","24",1,"primary","icononly-button","save-button","success",3,"click"],["d","M378-246 154-470l43-43 181 181 384-384 43 43-427 427Z"],[1,"text-sm","info-text"],["title","Watch Trailer on Youtube",1,"primary",3,"click"],["title","Download Trailer",1,"primary",3,"click","disabled"],["class","loading-icon",4,"ngIf"],[1,"loading-icon"],["title","Delete Trailer",1,"danger",3,"click"]],template:function(a,n){if(a&1){let d=w();i(0,"div",4),u(1,Mt,5,0,"div",5)(2,Ut,2,2,"ng-template",null,0,F),o(),i(4,"dialog",6,1),p("click",function(){return m(d),_(n.closeDeleteDialog())}),i(6,"div",7),p("click",function(M){return m(d),_(M.stopPropagation())}),i(7,"h2"),l(8,"Delete Trailer"),o(),i(9,"p"),l(10,"This will Delete the trailer file on disk for this Media"),o(),i(11,"p"),l(12,"Are you sure?"),o(),i(13,"button",8),p("click",function(){return m(d),_(n.onConfirmDelete())}),l(14,"Delete"),o(),i(15,"button",9),p("click",function(){return m(d),_(n.closeDeleteDialog())}),l(16,"Cancel"),o()()()}if(a&2){let d=P(3);r(),f("ngIf",n.isLoading)("ngIfElse",d)}},dependencies:[he,J,A,$,Y,ye,we,Pe],styles:[".media-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-x:hidden;overflow-y:auto;margin:1rem;border:1px solid var(--color-outline);border-radius:10px}@media (width < 768px){.media-details-container[_ngcontent-%COMP%]{margin:.5rem}}.text-center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{margin:auto}.media-details-card[_ngcontent-%COMP%]{position:relative;display:grid;grid-template-columns:1fr 3fr;padding:2rem;gap:2rem}.media-fanart-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:0;height:100%;background-size:cover;background-position:center;opacity:.4;border-radius:10px}.media-poster[_ngcontent-%COMP%]{z-index:2;display:flex;width:100%}.media-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:300px;height:auto;object-fit:contain;margin-bottom:auto}.media-details-col[_ngcontent-%COMP%]{z-index:2;flex:1;display:flex;flex-direction:column}.media-details-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem;gap:.75rem}.media-details-row[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-size:2.5rem;display:inline-block;overflow:hidden;max-width:70%}.icon-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;text-decoration:none;transition:all .4s;cursor:pointer}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;fill:var(--color-primary)}.nav-icons[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:1rem;margin-left:auto;margin-right:1rem}.icon-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{fill:var(--color-success)}.xdb-icon[_ngcontent-%COMP%]{width:60px;cursor:pointer;border-radius:4px}.extras[_ngcontent-%COMP%]{flex-wrap:wrap}.labeled-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.labeled-text[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7;margin-bottom:.1rem}.labeled-input[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap!important;align-items:stretch;width:100%;border:1px solid var(--color-outline);border-radius:6px}.labeled-input[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;align-items:center;padding:.75rem;font-size:1rem;font-weight:400;color:var(--color-on-surface-variant);text-align:center;white-space:nowrap;background-color:var(--color-surface-container-high);border-right:1px solid var(--color-outline);border-top-left-radius:6px;border-bottom-left-radius:6px}.labeled-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1 1 auto;width:1%;min-width:100px;display:block;padding:.75rem;font-size:1rem;font-weight:400;color:var(--color-on-surface);border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--color-surface-container);border-top-right-radius:6px;border-bottom-right-radius:6px}.input-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}.loading-search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:var(--color-primary);stroke:var(--color-primary)}.save-button[_ngcontent-%COMP%]{height:40px;width:40px}.info-text[_ngcontent-%COMP%]{margin:.5rem;padding:.5rem;border-radius:.5rem;background-color:var(--color-info);color:var(--color-info-text);text-align:center}.loading-icon[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center}.loading-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin-animation 2s linear infinite}@keyframes _ngcontent-%COMP%_spin-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dialog-content[_ngcontent-%COMP%]{background-color:var(--color-on-error-container);color:var(--color-on-error);padding:1rem;text-align:center}dialog[_ngcontent-%COMP%]::backdrop{background-image:linear-gradient(0deg,gray,#690005)}.dialog-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px}@media (max-width: 765px){.media-details-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0;padding-top:2rem;gap:1rem}.media-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:30vh;margin:0 auto}.media-details-col[_ngcontent-%COMP%]{align-items:center;margin:1rem;margin-top:0}.media-details-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:.3rem;gap:.75rem}.media-details-row[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{max-width:90%}}"]})}}return t})();var xi=[{path:"",component:Ee}];export{xi as mediaDetailsRoutes};
