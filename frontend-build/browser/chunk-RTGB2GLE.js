import{Dc as s,E as w,Gc as _,Jc as m,Y as U,a as n,b as l,c as u,ca as C,q as f,u as $,v as o}from"./chunk-M4QNQTBX.js";function h(r){return l(n({},r),{added_at:new Date(`${r.added_at}Z`),updated_at:new Date(`${r.updated_at}Z`),downloaded_at:new Date(`${r.downloaded_at}Z`),isImageLoaded:!1})}function d(r){let c=[{type:"folder",name:"None",size:"",path:"",files:[],modified:new Date,isExpanded:!1}];return r.files&&(c=r.files.map(t=>M(t)?g(t):d(t))),l(n({},r),{isExpanded:!1,modified:new Date(`${r.created}Z`),files:c})}function g(r){return l(n({},r),{isExpanded:!1,modified:new Date(`${r.created}Z`)})}function M(r){return r.type==="file"}var T=(()=>{class r{constructor(){this.httpClient=C(_),this.mediaUrl=m.apiUrl+m.media}fetchAllMedia(t,i="all"){let e=`${this.mediaUrl}all`,a;return t!==null?a=new s().set("movies_only",t).set("filter_by",i):a=new s().set("filter_by",i),this.httpClient.get(e,{params:a})}fetchUpdatedMedia(t){let i=`${this.mediaUrl}updated`,e=new s().set("seconds",t);return this.httpClient.get(i,{params:e})}fetchRecentlyDownloaded(t){let i=`${this.mediaUrl}downloaded`,e=new s;return t!==null?e=new s().set("limit","50").set("movies_only",t):e=new s().set("limit","50"),this.httpClient.get(i,{params:e}).pipe(o(a=>a.map(p=>h(p))))}getMediaByID(t){let i=`${this.mediaUrl}${t}`;return this.httpClient.get(i).pipe(o(e=>h(e)))}searchMedia(t){let i=`${this.mediaUrl}search`,e=new s().set("query",t);return this.httpClient.get(i,{params:e})}batchUpdate(t,i,e=-1){let a=`${this.mediaUrl}batch_update`;return this.httpClient.post(a,{media_ids:t,action:i.toLowerCase(),profile_id:e})}downloadMediaTrailer(t,i,e){let a=new s().set("profile_id",i).set("yt_id",e),p=`${this.mediaUrl}${t}/download`;return this.httpClient.post(p,{},{params:a})}monitorMedia(t,i){let e=new s().set("monitor",i),a=`${this.mediaUrl}${t}/monitor`;return this.httpClient.post(a,{},{params:e})}deleteMediaTrailer(t){let i=`${this.mediaUrl}${t}/trailer`;return this.httpClient.delete(i)}getMediaFiles(t){let i=`${this.mediaUrl}${t}/files`;return this.httpClient.get(i).pipe(o(e=>typeof e=="string"?e:d(e)),w(e=>(console.error("Error fetching media files:",e),f(`Error: ${e.message}`))))}fetchMediaFiles(t){return u(this,null,function*(){let i=`${this.mediaUrl}${t}/files`,e=yield $(this.httpClient.get(i));return d(e)})}searchMediaTrailer(t,i){let e=new s().set("profile_id",i),a=`${this.mediaUrl}${t}/search`;return this.httpClient.post(a,{},{params:e})}saveMediaTrailer(t,i){let e=`${this.mediaUrl}${t}/update`,a=new s().set("yt_id",i);return this.httpClient.post(e,{},{params:a})}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=U({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{h as a,T as b};
