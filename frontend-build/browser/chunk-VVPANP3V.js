import{Ma as s,Na as C,a as n,b as l,c,f as u,g as f,h as o,k as $,p as w,r as U,wb as p}from"./chunk-5OXT67OE.js";function m(r){return l(n({},r),{added_at:new Date(`${r.added_at}Z`),updated_at:new Date(`${r.updated_at}Z`),downloaded_at:new Date(`${r.downloaded_at}Z`),isImageLoaded:!1})}function d(r){let h=[{type:"folder",name:"None",size:"",path:"",files:[],modified:new Date,isExpanded:!1}];return r.files&&(h=r.files.map(t=>_(t)?M(t):d(t))),l(n({},r),{isExpanded:!1,modified:new Date(`${r.created}Z`),files:h})}function M(r){return l(n({},r),{isExpanded:!1,modified:new Date(`${r.created}Z`)})}function _(r){return r.type==="file"}var v=(()=>{class r{constructor(t){this.httpClient=t,this.mediaUrl=p.apiUrl+p.media}fetchAllMedia(t,e="all"){let i=`${this.mediaUrl}all`,a;return t!==null?a=new s().set("movies_only",t).set("filter_by",e):a=new s().set("filter_by",e),this.httpClient.get(i,{params:a})}fetchUpdatedMedia(t){let e=`${this.mediaUrl}updated`,i=new s().set("seconds",t);return this.httpClient.get(e,{params:i})}fetchRecentlyDownloaded(t){let e=`${this.mediaUrl}downloaded`,i=new s;return t!==null?i=new s().set("limit","50").set("movies_only",t):i=new s().set("limit","50"),this.httpClient.get(e,{params:i}).pipe(o(a=>a.map(g=>m(g))))}getMediaByID(t){let e=`${this.mediaUrl}${t}`;return this.httpClient.get(e).pipe(o(i=>m(i)))}searchMedia(t){let e=`${this.mediaUrl}search`,i=new s().set("query",t);return this.httpClient.get(e,{params:i})}batchUpdate(t,e){let i=`${this.mediaUrl}batch_update`;return this.httpClient.post(i,{media_ids:t,action:e.toLowerCase()})}downloadMediaTrailer(t,e){let i=new s().set("yt_id",e),a=`${this.mediaUrl}${t}/download`;return this.httpClient.post(a,{},{params:i})}monitorMedia(t,e){let i=new s().set("monitor",e),a=`${this.mediaUrl}${t}/monitor`;return this.httpClient.post(a,{},{params:i})}deleteMediaTrailer(t){let e=`${this.mediaUrl}${t}/trailer`;return this.httpClient.delete(e)}getMediaFiles(t){let e=`${this.mediaUrl}${t}/files`;return this.httpClient.get(e).pipe(o(i=>typeof i=="string"?i:d(i)),$(i=>(console.error("Error fetching media files:",i),u(`Error: ${i.message}`))))}fetchMediaFiles(t){return c(this,null,function*(){let e=`${this.mediaUrl}${t}/files`,i=yield f(this.httpClient.get(e));return d(i)})}searchMediaTrailer(t){let e=`${this.mediaUrl}${t}/search`;return this.httpClient.post(e,{})}saveMediaTrailer(t,e){let i=`${this.mediaUrl}${t}/update`,a=new s().set("yt_id",e);return this.httpClient.post(i,{},{params:a})}static{this.\u0275fac=function(e){return new(e||r)(U(C))}}static{this.\u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{m as a,d as b,v as c};
