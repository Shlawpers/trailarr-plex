import{a as G}from"./chunk-M7RPA5FE.js";import{B,O as A,P as W,q as H,s as R,t as D,v as N,w as j,y as z}from"./chunk-JV3QDCVW.js";import{a as $,b as J}from"./chunk-73WGUGFA.js";import{a as K}from"./chunk-KE3BN2UH.js";import{Ab as Q,Cb as I,Db as d,Eb as h,Fb as C,Ha as r,I as w,L as O,Ob as u,Qa as L,Tb as V,Ub as k,Z as P,ca as p,db as g,eb as m,gb as S,hb as b,ia as y,ib as Z,ja as q,jb as f,ka as c,kb as o,la as _,lb as i,mb as s,oa as T,ob as E,qc as U,rb as F,sb as v,tc as M}from"./chunk-RBBTGEQZ.js";var X=(()=>{let e=class e{constructor(){this.http=p(U),this.logsUrl=M.apiUrl+M.logs,this.downloadLogs=()=>this.http.get(this.logsUrl+"download",{responseType:"blob"}),this.getLogs=()=>this.http.get(this.logsUrl)}};e.\u0275fac=function(l){return new(l||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function et(t,e){t&1&&s(0,"app-load-indicator",2)}function nt(t,e){t&1&&(c(),o(0,"svg",15),s(1,"path",18),i())}function ot(t,e){t&1&&(c(),o(0,"svg",15),s(1,"path",19),i())}function it(t,e){t&1&&(c(),o(0,"svg",15),s(1,"path",20),i())}function rt(t,e){t&1&&(c(),o(0,"svg",15),s(1,"path",21),i())}function at(t,e){t&1&&(c(),o(0,"svg",15),s(1,"path",22),i())}function lt(t,e){if(t&1&&(o(0,"div",12)(1,"details")(2,"summary")(3,"p",13)(4,"i",14),g(5,nt,2,0,":svg:svg",15),g(6,ot,2,0,":svg:svg",15),g(7,it,2,0,":svg:svg",15),g(8,rt,2,0,":svg:svg",15),g(9,at,2,0,":svg:svg",15),i(),o(10,"strong"),d(11),i(),d(12),i(),o(13,"small",16),d(14),V(15,"timeago"),i()(),o(16,"p",17),d(17),i()()()),t&2){let n=e.$implicit;r(3),I(u("logs-text ",n.level.toLowerCase())),f("title",u("",n.level.toLowerCase()," log")),r(2),m(n.level=="DEBUG"?5:-1),r(),m(n.level=="INFO"?6:-1),r(),m(n.level=="WARNING"?7:-1),r(),m(n.level=="ERROR"?8:-1),r(),m(n.level=="OTHER"?9:-1),r(2),C("",n.module,": "),r(),C("",n.message," "),r(2),h(k(15,14,n.datetime)),r(3),h(n.raw_log)}}function st(t,e){if(t&1){let n=E();o(0,"div",3)(1,"i",4),F("click",function(){y(n);let l=v();return q(l.getLogs())}),c(),o(2,"svg",5),s(3,"path",6),i()(),_(),o(4,"form",7),s(5,"input",8),i(),o(6,"a",9),c(),o(7,"svg",5),s(8,"path",10),i()()(),_(),o(9,"div",11),b(10,lt,18,16,"div",12,S),i()}if(t&2){let n=v();r(),Q("loading",n.isUpdating),r(4),f("formControl",n.searchForm),r(5),Z(n.filtered_logs)}}var Y=(()=>{let e=class e{constructor(){this.destroyRef=p(T),this.logsService=p(X),this.title="Logs",this.isLoading=!0,this.isUpdating=!1,this.all_logs=[],this.searchQuery="",this.searchForm=new j,this.filtered_logs=[]}ngOnInit(){this.searchForm.valueChanges.pipe(w(400),O(),G(this.destroyRef)).subscribe(a=>{this.onSearch(a)}),this.isLoading=!0,this.getLogs()}getLogs(){this.isUpdating=!0,this.logsService.getLogs().subscribe(a=>{this.all_logs=a,this.filtered_logs=a,this.isLoading=!1,this.isUpdating=!1})}onSearch(a=""){if(a.length<3){this.filtered_logs=this.all_logs;return}a.trim()!==this.searchQuery&&(this.searchQuery=a,this.filtered_logs=this.all_logs.filter(l=>l.raw_log.toLowerCase().includes(this.searchQuery.toLowerCase())))}};e.\u0275fac=function(l){return new(l||e)},e.\u0275cmp=L({type:e,selectors:[["app-logs"]],decls:5,vars:2,consts:[[1,"logs-container"],[1,"logs-title","text-center"],[1,"center"],[1,"logssearch"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],["id","searchForm",1,"logssearch-form"],["type","text","autocomplete","off","name","query","placeholder","Filter logs...","aria-label","filter logs",3,"formControl"],["title","Download Logs","href","/api/v1/logs/download","download","",1,"icononly-button"],["d","M480-313 287-506l43-43 120 120v-371h60v371l120-120 43 43-193 193ZM220-160q-24 0-42-18t-18-42v-143h60v143h520v-143h60v143q0 24-18 42t-42 18H220Z"],[1,"logs-table"],[1,"logs-row"],[3,"title"],[1,"logs-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],[1,"logs-dt"],[1,"logs-raw"],["d","M320-242 80-482l242-242 43 43-199 199 197 197-43 43Zm318 2-43-43 199-199-197-197 43-43 240 240-242 242Z"],["d","M453-280h60v-240h-60v240Zm26.98-314q14.02 0 23.52-9.2T513-626q0-14.45-9.48-24.22-9.48-9.78-23.5-9.78t-23.52 9.78Q447-640.45 447-626q0 13.6 9.48 22.8 9.48 9.2 23.5 9.2Zm.29 514q-82.74 0-155.5-31.5Q252-143 197.5-197.5t-86-127.34Q80-397.68 80-480.5t31.5-155.66Q143-709 197.5-763t127.34-85.5Q397.68-880 480.5-880t155.66 31.5Q709-817 763-763t85.5 127Q880-563 880-480.27q0 82.74-31.5 155.5Q817-252 763-197.68q-54 54.31-127 86Q563-80 480.27-80Zm.23-60Q622-140 721-239.5t99-241Q820-622 721.19-721T480-820q-141 0-240.5 98.81T140-480q0 141 99.5 240.5t241 99.5Zm-.5-340Z"],["d","m40-120 440-760 440 760H40Zm104-60h672L480-760 144-180Zm340.18-57q12.82 0 21.32-8.68 8.5-8.67 8.5-21.5 0-12.82-8.68-21.32-8.67-8.5-21.5-8.5-12.82 0-21.32 8.68-8.5 8.67-8.5 21.5 0 12.82 8.68 21.32 8.67 8.5 21.5 8.5ZM454-348h60v-224h-60v224Zm26-122Z"],["d","M479.91-120q-28.91 0-49.41-20.59-20.5-20.59-20.5-49.5t20.59-49.41q20.59-20.5 49.5-20.5t49.41 20.59q20.5 20.59 20.5 49.5t-20.59 49.41q-20.59 20.5-49.5 20.5ZM410-360v-480h140v480H410Z"],["d","M477.03-246Q493-246 504-257.03q11-11.03 11-27T503.97-311q-11.03-11-27-11T450-310.97q-11 11.03-11 27T450.03-257q11.03 11 27 11ZM444-394h57q0-31 10-50.5t34.72-44.22Q579-522 592-547.5t13-53.5q0-53-34-84t-91.52-31q-51.87 0-88.17 24.5Q355-667 338-624l53 22q14-28 36.2-42.5Q449.4-659 479-659q32 0 50.5 16t18.5 44.1q0 19.9-11 38.4T500-517q-37 35-46.5 60t-9.5 63ZM180-120q-24 0-42-18t-18-42v-600q0-24 18-42t42-18h600q24 0 42 18t18 42v600q0 24-18 42t-42 18H180Zm0-60h600v-600H180v600Zm0-600v600-600Z"]],template:function(l,x){l&1&&(o(0,"div",0)(1,"h1",1),d(2),i(),g(3,et,1,0,"app-load-indicator",2)(4,st,12,3),i()),l&2&&(r(2),h(x.title),r(),m(x.isLoading?3:4))},dependencies:[A,z,H,R,D,N,K,W,B,J,$],styles:[".logs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.logs-title[_ngcontent-%COMP%]{position:sticky;top:76px;margin:0;padding:1rem;background-color:var(--color-surface-container-high);z-index:2}@media (width < 765px){.logs-title[_ngcontent-%COMP%]{top:62px}}.text-center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{margin:auto}.logssearch[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:auto;flex-grow:1;padding:1rem;background-color:var(--color-surface-container-high);position:sticky;top:145px;z-index:2;gap:.5rem}@media (width < 765px){.logssearch[_ngcontent-%COMP%]{padding:.5rem;top:113px}}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.logssearch-form[_ngcontent-%COMP%]{width:100%}.logssearch-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid var(--color-outline);border-radius:.5rem;margin:0;font-size:1rem;background-color:var(--color-surface-container-highest);color:var(--color-on-surface)}.logssearch-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:var(--color-primary);border:1px solid var(--color-primary)}.logs-table[_ngcontent-%COMP%]{padding:1rem}.logs-row[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #e0e0e0}@media (width < 765px){.logs-row[_ngcontent-%COMP%]{padding:0}}.logs-row[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{width:100%;list-style-position:outside}.logs-row[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{list-style-position:outside;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;cursor:pointer;position:relative}@media (width < 765px){.logs-row[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{flex-direction:column;align-items:baseline;gap:0;margin-bottom:1rem}}summary[_ngcontent-%COMP%]   .logs-text[_ngcontent-%COMP%]{flex:1;margin-left:2rem}.logs-icon[_ngcontent-%COMP%]{position:absolute;top:.75rem;left:0;font-size:0;z-index:0}.logs-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;fill:var(--color-outline)}summary[_ngcontent-%COMP%]   .debug[_ngcontent-%COMP%]{color:var(--color-info)}summary[_ngcontent-%COMP%]   .debug[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-info)}summary[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:var(--color-danger)}summary[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-danger)}summary[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-warning)}summary[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-warning)}"]});let t=e;return t})();var qt=[{path:"",loadComponent:()=>Y}];export{qt as default};
