import{n as l,o as d}from"./chunk-RXWHTZZW.js";import{a as p}from"./chunk-LTSMKAU7.js";import{G as i,Sa as C,Z as u,_b as w,c as h,ca as c,dc as b,qc as k,ra as f,rb as v,s as m,sc as T,tc as a,wa as y}from"./chunk-IZTUW6FH.js";var F=(()=>{let o=class o{constructor(){this.textToCopy=b.required(),this.webSocketService=c(p),this.element=c(y),this.element.nativeElement.classList.add("copy")}onClick(){this.copyToClipboard(this.textToCopy()),console.log("Element with copy button clicked!")}copyToClipboard(e){return h(this,null,function*(){if(navigator.clipboard)try{yield navigator.clipboard.writeText(e),this.webSocketService.showToast("Copied to clipboard!")}catch(t){this.webSocketService.showToast("Error copying text to clipboard.","Error"),console.error("Failed to copy: ",t)}else{let t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.webSocketService.showToast("Copied to clipboard!")}})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=C({type:o,selectors:[["","appCopyToClipboard",""]],hostBindings:function(t,n){t&1&&v("click",function(){return n.onClick()})("keydown.enter",function(){return n.onClick()})},inputs:{textToCopy:[1,"textToCopy"]}});let r=o;return r})();function s(){return r=>{let o="";if(r.error instanceof ErrorEvent)o=`Client Error: ${r.error.message}`;else{let g=r.error?.detail,e=r.error?.message,t=r.message||"Unknown error occurred";o=`Server Error (${r.status}): ${g||e||t}`}return m(()=>new Error(o))}}var Y=(()=>{let o=class o{constructor(){this.http=c(k),this.websocketService=c(p),this.connectionsUrl=a.apiUrl+a.connections,this.connectionsResource=T(()=>({url:this.connectionsUrl}),{defaultValue:[]}),this.newConnection={added_at:new Date().toISOString(),api_key:"",arr_type:l.Radarr,id:-1,monitor:d.New,name:"",path_mappings:[],url:""},this.connectionID=f(-1),this.selectedConnection=w(()=>{let e=this.connectionsResource.value().find(t=>t.id===this.connectionID());return e||this.newConnection})}addConnection(e){return this.http.post(this.connectionsUrl,e).pipe(i(s()))}connectionExists(e){return this.connectionsResource.value().some(n=>n.id===e)?!0:(e!=-1&&this.websocketService.showToast(`Connection with ID '${e}' does not exist.`,"error"),!1)}deleteConnection(e){var t=this.connectionsUrl+e;return this.http.delete(t).pipe(i(s()))}getRootFolders(e){var t=this.connectionsUrl+"rootfolders";return this.http.post(t,e).pipe(i(s()))}testConnection(e){var t=this.connectionsUrl+"test";return this.http.post(t,e).pipe(i(s()))}updateConnection(e,t){var n=this.connectionsUrl+e;return this.http.put(n,t).pipe(i(s()))}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{F as a,Y as b};
