import{a as G}from"./chunk-NVPX7OER.js";import{A as $,b as H,d as N,e as D,g as j,h as z,j as B,m as A,z as W}from"./chunk-JAQZWSEL.js";import{a as J,b as K}from"./chunk-SN7ZTHVN.js";import{Ab as M,G as L,J as O,Ja as i,Mb as F,Nb as R,Ob as m,Ra as b,Wa as h,X as y,ab as s,ba as f,bb as S,cb as I,ec as V,fc as U,hb as n,ib as o,ja as P,jb as a,ka as T,la as g,ma as x,mb as d,nb as E,ob as Z,pb as v,pc as k,qa as q,rb as Q,rc as w,wb as c,yb as _,zb as u}from"./chunk-LS7CSANC.js";var X=(()=>{class e{constructor(){this.http=f(k),this.logsUrl=w.apiUrl+w.logs,this.downloadLogs=()=>this.http.get(this.logsUrl+"download",{responseType:"blob"}),this.getLogs=()=>this.http.get(this.logsUrl)}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function oe(e,r){e&1&&(n(0,"div",9),a(1,"div",10)(2,"div",10)(3,"div",10)(4,"div",10),o())}function ie(e,r){e&1&&d(0)}function re(e,r){e&1&&d(0)}function le(e,r){e&1&&d(0)}function ae(e,r){e&1&&d(0)}function se(e,r){e&1&&d(0)}function ge(e,r){if(e&1&&(n(0,"div",21)(1,"details")(2,"summary")(3,"p",22)(4,"i",23),h(5,ie,1,0,"ng-container",24)(6,re,1,0,"ng-container",24)(7,le,1,0,"ng-container",24)(8,ae,1,0,"ng-container",24)(9,se,1,0,"ng-container",24),o(),n(10,"strong"),_(11),o(),_(12),o(),n(13,"small",25),_(14),F(15,"timeago"),o()(),n(16,"p",26),_(17),o()()()),e&2){let t=r.$implicit;v(2);let l=c(7),p=c(9),C=c(11),ee=c(13),te=c(15);i(3),I("logs-text ",t.level.toLowerCase(),""),Q("title","",t.level.toLowerCase()," log"),i(2),s("ngIf",t.level=="DEBUG")("ngIfThen",l),i(),s("ngIf",t.level=="INFO")("ngIfThen",p),i(),s("ngIf",t.level=="WARNING")("ngIfThen",C),i(),s("ngIf",t.level=="ERROR")("ngIfThen",ee),i(),s("ngIf",t.level=="OTHER")("ngIfThen",te),i(2),M("",t.module,": "),i(),M("",t.message," "),i(2),u(R(15,19,t.datetime)),i(3),u(t.raw_log)}}function ce(e,r){if(e&1){let t=E();n(0,"div",11)(1,"i",12),Z("click",function(){P(t);let p=v();return T(p.getLogs())}),g(),n(2,"svg",13),a(3,"path",14),o()(),x(),n(4,"form",15),a(5,"input",16),o(),n(6,"a",17),g(),n(7,"svg",13),a(8,"path",18),o()()(),x(),n(9,"div",19),h(10,ge,18,21,"div",20),o()}if(e&2){let t=v();i(),S("loading",t.isUpdating),i(4),s("formControl",t.searchForm),i(5),s("ngForOf",t.filtered_logs)}}function me(e,r){e&1&&(g(),n(0,"svg",27),a(1,"path",28),o())}function pe(e,r){e&1&&(g(),n(0,"svg",27),a(1,"path",29),o())}function de(e,r){e&1&&(g(),n(0,"svg",27),a(1,"path",30),o())}function _e(e,r){e&1&&(g(),n(0,"svg",27),a(1,"path",31),o())}function fe(e,r){e&1&&(g(),n(0,"svg",27),a(1,"path",32),o())}var Y=(()=>{class e{constructor(){this.destroyRef=f(q),this.logsService=f(X),this.title="Logs",this.isLoading=!0,this.isUpdating=!1,this.all_logs=[],this.searchQuery="",this.searchForm=new z,this.filtered_logs=[]}ngOnInit(){this.searchForm.valueChanges.pipe(L(400),O(),G(this.destroyRef)).subscribe(t=>{this.onSearch(t)}),this.isLoading=!0,this.getLogs()}getLogs(){this.isUpdating=!0,this.logsService.getLogs().subscribe(t=>{this.all_logs=t,this.filtered_logs=t,this.isLoading=!1,this.isUpdating=!1})}onSearch(t=""){if(t.length<3){this.filtered_logs=this.all_logs;return}t.trim()!==this.searchQuery&&(this.searchQuery=t,this.filtered_logs=this.all_logs.filter(l=>l.raw_log.toLowerCase().includes(this.searchQuery.toLowerCase())))}static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275cmp=b({type:e,selectors:[["app-logs"]],decls:16,vars:3,consts:[["logsLoaded",""],["debugLog",""],["infoLog",""],["warningLog",""],["errorLog",""],["otherLog",""],[1,"logs-container"],[1,"logs-title","text-center"],["class","loading-wave center",4,"ngIf","ngIfElse"],[1,"loading-wave","center"],[1,"loading-bar"],[1,"logssearch"],["title","Refresh",1,"icononly-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960",1,"refresh-icon"],["d","M343-107q-120-42-194.5-146.5T74-490q0-29 4-57.5T91-604l-57 33-37-62 185-107 106 184-63 36-54-92q-13 30-18.5 60.5T147-490q0 113 65.5 200T381-171l-38 64Zm291-516v-73h107q-47-60-115.5-93.5T480-823q-66 0-123.5 24T255-734l-38-65q54-45 121-71t142-26q85 0 160.5 33T774-769v-67h73v213H634ZM598-1 413-107l107-184 62 37-54 94q123-17 204.5-110.5T814-489q0-19-2.5-37.5T805-563h74q4 18 6 36.5t2 36.5q0 142-87 251.5T578-96l56 33-36 62Z"],["id","searchForm",1,"logssearch-form"],["type","text","autocomplete","off","name","query","placeholder","Filter logs...","aria-label","filter logs",3,"formControl"],["title","Download Logs","href","/api/v1/logs/download","download","",1,"icononly-button"],["d","M480-313 287-506l43-43 120 120v-371h60v371l120-120 43 43-193 193ZM220-160q-24 0-42-18t-18-42v-143h60v143h520v-143h60v143q0 24-18 42t-42 18H220Z"],[1,"logs-table"],["class","logs-row",4,"ngFor","ngForOf"],[1,"logs-row"],[3,"title"],[1,"logs-icon"],[4,"ngIf","ngIfThen"],[1,"logs-dt"],[1,"logs-raw"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960"],["d","M320-242 80-482l242-242 43 43-199 199 197 197-43 43Zm318 2-43-43 199-199-197-197 43-43 240 240-242 242Z"],["d","M453-280h60v-240h-60v240Zm26.98-314q14.02 0 23.52-9.2T513-626q0-14.45-9.48-24.22-9.48-9.78-23.5-9.78t-23.52 9.78Q447-640.45 447-626q0 13.6 9.48 22.8 9.48 9.2 23.5 9.2Zm.29 514q-82.74 0-155.5-31.5Q252-143 197.5-197.5t-86-127.34Q80-397.68 80-480.5t31.5-155.66Q143-709 197.5-763t127.34-85.5Q397.68-880 480.5-880t155.66 31.5Q709-817 763-763t85.5 127Q880-563 880-480.27q0 82.74-31.5 155.5Q817-252 763-197.68q-54 54.31-127 86Q563-80 480.27-80Zm.23-60Q622-140 721-239.5t99-241Q820-622 721.19-721T480-820q-141 0-240.5 98.81T140-480q0 141 99.5 240.5t241 99.5Zm-.5-340Z"],["d","m40-120 440-760 440 760H40Zm104-60h672L480-760 144-180Zm340.18-57q12.82 0 21.32-8.68 8.5-8.67 8.5-21.5 0-12.82-8.68-21.32-8.67-8.5-21.5-8.5-12.82 0-21.32 8.68-8.5 8.67-8.5 21.5 0 12.82 8.68 21.32 8.67 8.5 21.5 8.5ZM454-348h60v-224h-60v224Zm26-122Z"],["d","M479.91-120q-28.91 0-49.41-20.59-20.5-20.59-20.5-49.5t20.59-49.41q20.59-20.5 49.5-20.5t49.41 20.59q20.5 20.59 20.5 49.5t-20.59 49.41q-20.59 20.5-49.5 20.5ZM410-360v-480h140v480H410Z"],["d","M477.03-246Q493-246 504-257.03q11-11.03 11-27T503.97-311q-11.03-11-27-11T450-310.97q-11 11.03-11 27T450.03-257q11.03 11 27 11ZM444-394h57q0-31 10-50.5t34.72-44.22Q579-522 592-547.5t13-53.5q0-53-34-84t-91.52-31q-51.87 0-88.17 24.5Q355-667 338-624l53 22q14-28 36.2-42.5Q449.4-659 479-659q32 0 50.5 16t18.5 44.1q0 19.9-11 38.4T500-517q-37 35-46.5 60t-9.5 63ZM180-120q-24 0-42-18t-18-42v-600q0-24 18-42t42-18h600q24 0 42 18t18 42v600q0 24-18 42t-42 18H180Zm0-60h600v-600H180v600Zm0-600v600-600Z"]],template:function(l,p){if(l&1&&(n(0,"div",6)(1,"h1",7),_(2),o(),h(3,oe,5,0,"div",8)(4,ce,11,4,"ng-template",null,0,m),o(),h(6,me,2,0,"ng-template",null,1,m)(8,pe,2,0,"ng-template",null,2,m)(10,de,2,0,"ng-template",null,3,m)(12,_e,2,0,"ng-template",null,4,m)(14,fe,2,0,"ng-template",null,5,m)),l&2){let C=c(5);i(2),u(p.title),i(),s("ngIf",p.isLoading)("ngIfElse",C)}},dependencies:[U,V,W,B,H,N,D,j,$,A,K,J],styles:[".logs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.logs-title[_ngcontent-%COMP%]{position:sticky;top:76px;margin:0;padding:1rem;background-color:var(--color-surface-container-high);z-index:2}@media (width < 765px){.logs-title[_ngcontent-%COMP%]{top:62px}}.text-center[_ngcontent-%COMP%]{text-align:center}.center[_ngcontent-%COMP%]{margin:auto}.logssearch[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:auto;flex-grow:1;padding:1rem;background-color:var(--color-surface-container-high);position:sticky;top:145px;z-index:2;gap:.5rem}@media (width < 765px){.logssearch[_ngcontent-%COMP%]{padding:.5rem;top:113px}}.refresh-icon[_ngcontent-%COMP%]{cursor:pointer;fill:var(--color-on-surface)}.loading[_ngcontent-%COMP%]{cursor:progress;animation:spin-animation 2s linear infinite}.logssearch-form[_ngcontent-%COMP%]{width:100%}.logssearch-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid var(--color-outline);border-radius:.5rem;margin:0;font-size:1rem;background-color:var(--color-surface-container-highest);color:var(--color-on-surface)}.logssearch-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:var(--color-primary);border:1px solid var(--color-primary)}.logs-table[_ngcontent-%COMP%]{padding:1rem}.logs-row[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #e0e0e0}@media (width < 765px){.logs-row[_ngcontent-%COMP%]{padding:0}}.logs-row[_ngcontent-%COMP%]   details[_ngcontent-%COMP%]{width:100%;list-style-position:outside}.logs-row[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{list-style-position:outside;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;cursor:pointer;position:relative}@media (width < 765px){.logs-row[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{flex-direction:column;align-items:baseline;gap:0;margin-bottom:1rem}}summary[_ngcontent-%COMP%]   .logs-text[_ngcontent-%COMP%]{flex:1;margin-left:2rem}.logs-icon[_ngcontent-%COMP%]{position:absolute;top:.75rem;left:0;font-size:0;z-index:0}.logs-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;fill:var(--color-outline)}summary[_ngcontent-%COMP%]   .debug[_ngcontent-%COMP%]{color:var(--color-info)}summary[_ngcontent-%COMP%]   .debug[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-info)}summary[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:var(--color-danger)}summary[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-danger)}summary[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-warning)}summary[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--color-warning)}"]})}}return e})();var Ze=[{path:"",loadComponent:()=>Y}];export{Ze as default};
