<div *ngIf="media_list.length > 0" class="media-header">
    <!-- Sort Options -->
    <div class="media-header-sortitem">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="icon">
            <path d="M120-240v-60h240v60H120Zm0-210v-60h480v60H120Zm0-210v-60h720v60H120Z" />
        </svg>
        <div> {{displayOptionTitle(selectedSort)}}</div>
        <div class="sortitem-dropdown">
            <div *ngFor="let sortOption of sortOptions" class="sortitem-dropdown-option" (click)="sortMediaList(sortOption)">
                {{displayOptionTitle(sortOption)}}
                <div *ngIf="selectedSort == sortOption && sortAscending">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="icon">
                        <path
                        d="M480-200 240-440l42-42 198 198 198-198 42 42-240 240Zm0-253L240-693l42-42 198 198 198-198 42 42-240 240Z" />
                    </svg>
                </div>
                <div *ngIf="selectedSort == sortOption && !sortAscending">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="icon">
                        <path
                            d="m282-225-42-42 240-240 240 240-42 42-198-198-198 198Zm0-253-42-42 240-240 240 240-42 42-198-198-198 198Z" />
                    </svg>
                </div>
            </div>
        </div>
    </div>
    <!-- Filter Options -->
    <div class="media-header-filteritem">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="icon">
            <path d="M120-240v-60h240v60H120Zm0-210v-60h480v60H120Zm0-210v-60h720v60H120Z" />
        </svg>
        <div> {{displayOptionTitle(selectedFilter)}}</div>
        <div class="filteritem-dropdown">
            <div *ngFor="let filterOption of filterOptions" class="filteritem-dropdown-option" (click)="setMediaFilter(filterOption)">
                {{displayOptionTitle(filterOption)}}
                <div *ngIf="selectedFilter == filterOption">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="icon">
                        <path
                            d="M480-200 240-440l42-42 198 198 198-198 42 42-240 240Zm0-253L240-693l42-42 198 198 198-198 42 42-240 240Z" />
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="media-container">
    <!-- <h1 class="text-center">{{title}}</h1> -->
    <div *ngIf="isLoading; else mediaLoaded" class="loading-wave center">
        <div class="loading-bar"></div>
        <div class="loading-bar"></div>
        <div class="loading-bar"></div>
        <div class="loading-bar"></div>
    </div>
    <ng-template #mediaLoaded>
        <div *ngIf="media_list.length === 0" class="center">
            <div class="all-empty-card" [routerLink]="['/settings', 'connections', 'add']">
                Click me!
            </div>
        </div>

        <div class="media-row">
            <div *ngFor="let media of media_list" class="media-card" [routerLink]="[media.id]">
                <img src="{{media.poster_path || 'assets/poster-sm.png'}}" alt="{{media.title}}">
                <h5 class="card-title">{{media.title}}</h5>
                <ng-container *ngIf="media.monitor; else trailerExistsIcon">
                    <!-- Monitored Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="monitored-icon"
                        aria-label="Monitored">
                        <path
                            d="M713-600 600-713l56-57 57 57 141-142 57 57-198 198ZM200-120v-640q0-33 23.5-56.5T280-840h280q-20 30-30 57.5T520-720q0 72 45.5 127T680-524q23 3 40 3t40-3v404L480-240 200-120Z" />
                    </svg>
                </ng-container>
                <ng-template #trailerExistsIcon>
                    <!-- Trailer Exists Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" class="downloaded-icon"
                        [class.success]="media.trailer_exists" aria-label="Trailer Exists">
                        <path
                            d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q65 0 123 19t107 53l-58 59q-38-24-81-37.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-18-2-36t-6-35l65-65q11 32 17 66t6 70q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-56-216L254-466l56-56 114 114 400-401 56 56-456 457Z" />
                    </svg>
                </ng-template>
            </div>
        </div>
    </ng-template>
</div>